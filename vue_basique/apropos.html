<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>√Ä propos - Eco-Calculateur CO‚ÇÇ</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* Style pour les notifications */
      .notification-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        width: 350px;
        max-width: 90%;
      }

      .notification {
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        margin-bottom: 15px;
        overflow: hidden;
        animation: slide-in 0.3s ease-out forwards;
        display: flex;
        align-items: stretch;
      }

      .notification.closing {
        animation: slide-out 0.3s ease-in forwards;
      }

      .notification-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 50px;
        color: white;
      }

      .notification-success .notification-icon {
        background-color: #28a745;
      }

      .notification-error .notification-icon {
        background-color: #dc3545;
      }

      .notification-info .notification-icon {
        background-color: #17a2b8;
      }

      .notification-warning .notification-icon {
        background-color: #ffc107;
      }

      .notification-content {
        padding: 15px;
        flex-grow: 1;
      }

      .notification-title {
        font-weight: bold;
        margin-bottom: 5px;
      }

      .notification-message {
        color: #555;
      }

      .notification-close {
        background: transparent;
        border: none;
        color: #aaa;
        cursor: pointer;
        font-size: 18px;
        padding: 10px;
        align-self: flex-start;
      }

      .notification-close:hover {
        color: #555;
      }

      @keyframes slide-in {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slide-out {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- Conteneur pour les notifications -->
    <div class="notification-container" id="notification-container"></div>

    <!-- Navbar avec login et historiques -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm p-3">
      <a class="navbar-brand fw-bold" href="index.html" id="refresh-page"
        >üå± Eco-Calculateur</a
      >
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Accueil</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="apropos.html">√Ä propos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" id="history-link">Historiques</a>
          </li>

          <!-- Bouton Login (si non connect√©) ou Logout (si connect√©) -->
          <li class="nav-item">
            <a
              id="login-btn"
              class="btn btn-success text-white ms-2"
              href="login.html"
            >
              <i class="fas fa-sign-in-alt me-1"></i>Connexion
            </a>
            <a
              id="logout-btn"
              class="btn btn-danger text-white ms-2"
              href="#"
              style="display: none"
            >
              <i class="fas fa-sign-out-alt me-1"></i>D√©connexion
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container mt-5">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <div class="card shadow">
            <div class="card-body p-5">
              <h1 class="text-center">√Ä propos du projet</h1>
              <p class="text-center">
                Cette page contient des informations sur le projet
                Eco-Calculateur
              </p>

              <div class="card p-4 mt-4">
                <h2>Pr√©sentation du projet</h2>
                <p>
                  Le Comparateur d'Impact Carbone des Transports est un outil
                  num√©rique con√ßu pour aider les citoyens et les experts
                  environnementaux √† comparer l'empreinte carbone de diff√©rents
                  modes de transport pour un m√™me trajet. Notre application
                  offre une interface intuitive permettant aux utilisateurs de
                  visualiser graphiquement les √©missions de CO2 g√©n√©r√©es par
                  divers moyens de transport, facilitant ainsi des choix de
                  mobilit√© plus √©co-responsables. En transformant des donn√©es
                  techniques en informations claires et accessibles, notre outil
                  sert de v√©ritable vecteur p√©dagogique dans la sensibilisation
                  aux enjeux climatiques actuels.
                </p>
              </div>

              <!-- Style 3: Accord√©on -->
              <div class="card shadow-sm titre">
                <h2 class="mb-0">Origine des donn√©es</h2>

                <div class="card-body">
                  <p>
                    La fiabilit√© de notre comparateur repose sur l'utilisation
                    de sources de donn√©es reconnues et actualis√©es :
                  </p>

                  <div class="accordion" id="accordionDataSources">
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingOne">
                        <button
                          class="accordion-button collapsed"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseOne"
                          aria-expanded="false"
                          aria-controls="collapseOne"
                        >
                          <strong>ImpactCO2</strong>
                        </button>
                      </h2>
                      <div
                        id="collapseOne"
                        class="accordion-collapse collapse"
                        aria-labelledby="headingOne"
                        data-bs-parent="#accordionDataSources"
                      >
                        <div class="accordion-body">
                          <div class="d-flex align-items-center mb-3">
                            <span class="badge bg-primary me-2">API</span>
                            <span class="badge bg-success me-2"
                              >√âmissions CO2</span
                            >
                          </div>
                          <p>
                            Nous utilisons l'API d'ImpactCO2 pour acc√©der aux
                            taux d'√©mission de CO2 des diff√©rents modes de
                            transport.
                          </p>
                          <a
                            href="https://impactco2.fr/outils/transport"
                            class="btn btn-sm btn-outline-primary"
                            >Visiter le site</a
                          >
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingTwo">
                        <button
                          class="accordion-button collapsed"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseTwo"
                          aria-expanded="false"
                          aria-controls="collapseTwo"
                        >
                          <strong>ADEME</strong>
                        </button>
                      </h2>
                      <div
                        id="collapseTwo"
                        class="accordion-collapse collapse"
                        aria-labelledby="headingTwo"
                        data-bs-parent="#accordionDataSources"
                      >
                        <div class="accordion-body">
                          <div class="d-flex align-items-center mb-3">
                            <span class="badge bg-info me-2"
                              >Base de donn√©es</span
                            >
                            <span class="badge bg-success me-2"
                              >R√©f√©rence nationale</span
                            >
                          </div>
                          <p>
                            Les donn√©es environnementales de l'Agence de
                            l'Environnement et de la Ma√Ætrise de l'√ânergie
                            constituent une r√©f√©rence essentielle pour nos
                            calculs.
                          </p>
                          <a
                            href="https://base-empreinte.ademe.fr/"
                            class="btn btn-sm btn-outline-primary"
                            >Visiter le site</a
                          >
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingThree">
                        <button
                          class="accordion-button collapsed"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseThree"
                          aria-expanded="false"
                          aria-controls="collapseThree"
                        >
                          <strong>OpenStreetMap</strong>
                        </button>
                      </h2>
                      <div
                        id="collapseThree"
                        class="accordion-collapse collapse"
                        aria-labelledby="headingThree"
                        data-bs-parent="#accordionDataSources"
                      >
                        <div class="accordion-body">
                          <div class="d-flex align-items-center mb-3">
                            <span class="badge bg-warning text-dark me-2"
                              >Cartographie</span
                            >
                            <span class="badge bg-success me-2"
                              >Open Source</span
                            >
                          </div>
                          <p>
                            L'API d'OpenStreetMap nous permet de calculer
                            pr√©cis√©ment les distances entre diff√©rents points
                            g√©ographiques.
                          </p>
                          <a
                            href="https://www.openstreetmap.org/copyright"
                            class="btn btn-sm btn-outline-primary"
                            >Visiter le site</a
                          >
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingFour">
                        <button
                          class="accordion-button collapsed"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseFour"
                          aria-expanded="false"
                          aria-controls="collapseFour"
                        >
                          <strong>Distance Matrix</strong>
                        </button>
                      </h2>
                      <div
                        id="collapseFour"
                        class="accordion-collapse collapse"
                        aria-labelledby="headingFour"
                        data-bs-parent="#accordionDataSources"
                      >
                        <div class="accordion-body">
                          <div class="d-flex align-items-center mb-3">
                            <span class="badge bg-secondary me-2"
                              >G√©olocalisation</span
                            >
                            <span class="badge bg-success me-2"
                              >Conversion d'adresses</span
                            >
                          </div>
                          <p>
                            Ce service nous aide √† convertir les adresses en
                            coordonn√©es GPS pour une meilleure pr√©cision des
                            calculs.
                          </p>
                          <a
                            href="https://distancematrix.ai/fr/distance-matrix-api"
                            class="btn btn-sm btn-outline-primary"
                            >Visiter le site</a
                          >
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="alert alert-light border mt-4">
                    <div class="d-flex">
                      <div class="me-3">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="24"
                          height="24"
                          fill="currentColor"
                          class="bi bi-info-circle-fill text-primary"
                          viewBox="0 0 16 16"
                        >
                          <path
                            d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"
                          />
                        </svg>
                      </div>
                      <p class="mb-0">
                        Nos m√©thodes de calcul s'appuient notamment sur la
                        formule de Haversine pour d√©terminer les distances √†
                        partir des coordonn√©es GPS, garantissant ainsi une
                        estimation pr√©cise des √©missions selon les trajets.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card p-4 mt-4">
                <h2>Cr√©dits</h2>
                <p>
                  Ce projet a √©t√© d√©velopp√© dans le cadre de l'UE MIF10 "Projet
                  transversal" √† l'Universit√© Claude Bernard Lyon 1.
                </p>
              </div>

              <div class="card p-4 mt-4">
                <h2>√âquipe de d√©veloppement</h2>
                <ul class="list-group border-0 px-0">
                  <li class="list-group-item border-0 px-0">
                    üìã <strong>AUBOURG Thomas</strong> ‚Äî Responsable gestion de
                    projet
                  </li>
                  <li class="list-group-item border-0 px-0">
                    üé® <strong>TEKIN Emir</strong> ‚Äî D√©veloppeur Front-end & UX
                    Designer
                  </li>
                  <li class="list-group-item border-0 px-0">
                    üé® <strong>TIDJANI Mounira</strong> ‚Äî D√©veloppeur Front-end
                    & UX Designer
                  </li>
                  <li class="list-group-item border-0 px-0">
                    üß™ <strong>ERGHAI Abdelmounaim</strong> ‚Äî Responsable
                    Int√©gration Continue & Tests
                  </li>
                  <li class="list-group-item border-0 px-0">
                    üõ†Ô∏è <strong>NEDJAR Amine</strong> ‚Äî D√©veloppeur Back-end &
                    Data Engineer
                  </li>
                  <li class="list-group-item border-0 px-0">
                    üõ†Ô∏è <strong>FERREIRA R√©mi</strong> ‚Äî D√©veloppeur Back-end &
                    Data Engineer
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Syst√®me de notification
      const notifications = {
        container: document.getElementById("notification-container"),

        show: function (options) {
          const notification = document.createElement("div");
          notification.className = `notification notification-${
            options.type || "info"
          }`;

          // D√©terminer l'ic√¥ne en fonction du type
          let iconClass = "fa-info-circle";
          let title = "Information";

          switch (options.type) {
            case "success":
              iconClass = "fa-check-circle";
              title = "Succ√®s";
              break;
            case "error":
              iconClass = "fa-exclamation-circle";
              title = "Erreur";
              break;
            case "warning":
              iconClass = "fa-exclamation-triangle";
              title = "Attention";
              break;
          }

          // Cr√©er le contenu HTML de la notification
          notification.innerHTML = `
                    <div class="notification-icon">
                        <i class="fas ${iconClass}"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${
                          options.title || title
                        }</div>
                        <div class="notification-message">${
                          options.message
                        }</div>
                    </div>
                    <button class="notification-close">√ó</button>
                `;

          // Ajouter au conteneur
          this.container.appendChild(notification);

          // G√©rer la fermeture
          const closeBtn = notification.querySelector(".notification-close");
          closeBtn.addEventListener("click", () => this.close(notification));

          // Auto-fermeture apr√®s d√©lai
          if (options.duration !== Infinity) {
            setTimeout(() => {
              if (notification.parentNode) {
                this.close(notification);
              }
            }, options.duration || 5000);
          }

          return notification;
        },

        close: function (notification) {
          notification.classList.add("closing");
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 300); // Dur√©e de l'animation
        },

        success: function (message, options = {}) {
          return this.show({
            type: "success",
            message,
            ...options,
          });
        },

        error: function (message, options = {}) {
          return this.show({
            type: "error",
            message,
            ...options,
          });
        },

        info: function (message, options = {}) {
          return this.show({
            type: "info",
            message,
            ...options,
          });
        },

        warning: function (message, options = {}) {
          return this.show({
            type: "warning",
            message,
            ...options,
          });
        },
      };

      // Exposer l'objet notifications globalement
      window.notifications = notifications;

      // G√©rer l'authentification
      document.addEventListener("DOMContentLoaded", function () {
        const token = localStorage.getItem("token");
        const userData = localStorage.getItem("user")
          ? JSON.parse(localStorage.getItem("user"))
          : null;

        // √âl√©ments DOM
        const loginBtn = document.getElementById("login-btn");
        const logoutBtn = document.getElementById("logout-btn");
        const historyLink = document.getElementById("history-link");

        // V√©rifier si l'utilisateur est connect√©
        function checkAuth() {
          if (token && userData) {
            // Utilisateur connect√©
            loginBtn.style.display = "none";
            logoutBtn.style.display = "block";
          } else {
            // Utilisateur non connect√©
            loginBtn.style.display = "block";
            logoutBtn.style.display = "none";
          }
        }

        // G√©rer le clic sur Historiques
        historyLink.addEventListener("click", function (e) {
          e.preventDefault();

          if (!token) {
            // Utilisateur non connect√©
            window.notifications.warning("Acc√®s restreint", {
              title: "Authentification requise",
              message:
                "Veuillez vous connecter pour acc√©der √† votre historique de recherches",
              duration: 7000,
            });
          } else {
            // Rediriger vers la page d'historiques
            window.location.href = "historiques.html";
          }
        });

        // G√©rer la d√©connexion
        logoutBtn.addEventListener("click", function (e) {
          e.preventDefault();
          localStorage.removeItem("token");
          localStorage.removeItem("user");
          window.notifications.success("Vous avez √©t√© d√©connect√© avec succ√®s", {
            title: "D√©connexion r√©ussie",
            message: "Vous avez √©t√© d√©connect√© avec succ√®s",
            duration: 5000,
          });
          window.location.reload();
          checkAuth();
        });

        // V√©rifier l'authentification au chargement
        checkAuth();
      });
    </script>
  </body>
</html>
